---
title: 高级技巧
date: 2017-09-12 10:40:37
tags: javaScript高级程序设计笔记
---
## 高级函数
### 安全的类型检测
> 使用`typeof`检测数组函数等返回都是`object`, 无法获取正确类型, 所以可以使用下面的方法获取正确的类型信息 

```
var value = []
Object.prototype.toString.call(value)//"[object Array]"
```

### 安全构造函数

```
function Polygon(sides) {
	if  (this instanceof Polygon) {
		this.sides = sides;
		this.getArea = function() {
			return 0;
		}
	} else {
		return new Polygon(sides);
	}
}

function Rectangle(width, height) {
	Polygon.call(this, 2);
	this.width = width;
	this.height = height;
	this.getArea = function() {
		return this.width *  this.height;
	}
}

Rectangle.prototype = new Polygon();
var rect = new Rectangle(5, 10);
rect.sides;//2
```

### 惰性载入函数
> 有时候函数的具体逻辑, 会根据环境不同而不同, 因此我们可以使用惰性载入函数, 在页面加载的时候就能自运行获取正确的函数, 而不用再调用时在去判断生成

```
var createXHR = (function() {
	if (typeof XMLHttpRequest != "undefined") {
		return function() {
			return new XMLHttpRequest();
		}
	} else {
		return function() {
			//...
		}
	}
})()
```

### 函数绑定